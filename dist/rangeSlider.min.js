!function(t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?t():window.rangeSlider=t()}(function(){"use strict";function t(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function e(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)}function i(t,e){return e=e||100,function(){if(!t.debouncing){var i=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,i),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function n(t){return!(0!==t.offsetWidth&&0!==t.offsetHeight&&t.open!==!1)}function s(t){for(var e=[],i=t.parentNode;n(i);)e.push(i),i=i.parentNode;return e}function o(t,e){function i(t){"undefined"!=typeof t.open&&(t.open=t.open?!1:!0)}var n=s(t),o=n.length,r=[],h=t[e];if(o){for(var a=0;o>a;a++)r[a]=n[a].style.display,n[a].style.display="block",n[a].style.height="0",n[a].style.overflow="hidden",n[a].style.visibility="hidden",i(n[a]);h=t[e];for(var l=0;o>l;l++)i(n[l]),n[l].style.display=r[l],n[l].style.height="",n[l].style.overflow="",n[l].style.visibility=""}return h}function r(t){return t===""+t}function h(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n}function a(t,e){for(var i in e)t.style[i]=e[i];return t.style}function l(t,e){c(t,e)||(t.className+=" "+e)}function u(t,e){var i=" "+t.className.replace(/[\t\r\n]/g," ")+" ";if(c(t,e)){for(;i.indexOf(" "+e+" ")>=0;)i=i.replace(" "+e+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}}function d(t,e){return function(){t.apply(e,arguments)}}function p(t,e,i){for(i&&e(t);t.parentNode&&!e(t);)t=t.parentNode;return t}function f(t,e,i){if(!r(e))throw new TypeError("event name must be String");if(!t instanceof HTMLElement)throw new TypeError("element must be HTMLElement");e=e.trim();var n=new CustomEvent(e,i);t.dispatchEvent(n)}function c(t,e){return new RegExp(" "+e+" ").test(" "+t.className+" ")}function m(t,e){t.parentNode.insertBefore(e,t.nextSibling)}function v(t,e,i){e.forEach(function(e){t[E]||(t[E]={}),t[E][e]||(t[E][e]=[]),t.addEventListener(e,i,!1),t[E][e].indexOf(i)<0&&t[E][e].push(i)})}function g(t,e,i){e.forEach(function(e){t.removeEventListener(e,i,!1);var n;t[E]&&t[E][e]&&(n=t[E][e].indexOf(i))>-1&&t[E][e].splice(n,1)})}function y(t){function e(t){this.el.removeEventListener(this.eventName,t,!1)}if(t[E]){for(var i in t[E])t[E][i].forEach(e,{eventName:i,el:t});t[E]={}}}function b(t,e){var i,n,s;return this.element=t,this.options=h(F,e),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideStart=this.options.onSlideStart,this.onSlideEnd=this.options.onSlideEnd,this.onSlideEventsCount=-1,!this.polyfill&&w?!1:(this.options.buffer=this.options.buffer||parseFloat(this.element.dataset.buffer),this.identifier="js-"+x+"-"+S++,this.min=this.options.min||parseFloat(this.element.getAttribute("min")||(i=0)),this.max=this.options.max||parseFloat(this.element.getAttribute("max")||(n=100)),this.value=this.options.value||parseFloat(this.element.value||this.min+(this.max-this.min)/2),this.step=this.options.step||parseFloat(this.element.getAttribute("step")||(s=1)),this.percent=null,this._updatePercentFromValue(),this.toFixed=this._toFixed(this.step),this.fill=document.createElement("div"),this.fill.className=this.options.fillClass,this.handle=document.createElement("div"),this.handle.className=this.options.handleClass,this.range=document.createElement("div"),this.range.className=this.options.rangeClass,this.range.id=this.identifier,this.range.appendChild(this.handle),this.range.appendChild(this.fill),this.options.bufferClass&&(this.buffer=document.createElement("div"),this.buffer.className=this.options.bufferClass,this.range.appendChild(this.buffer)),this.options.value&&(this.element.value=this.options.value),this.options.buffer&&(this.element.dataset.buffer=this.options.buffer),(this.options.min||i)&&this.element.setAttribute("min",""+this.min),(this.options.max||n)&&this.element.setAttribute("max",""+this.max),(this.options.step||s)&&this.element.setAttribute("step",""+this.step),m(this.element,this.range),a(this.element,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=d(this.handleDown,this),this.handleMove=d(this.handleMove,this),this.handleEnd=d(this.handleEnd,this),this.startEventListener=d(this.startEventListener,this),this.changeEventListener=d(this.changeEventListener,this),this.handleResize=d(this.handleResize,this),this.init(),window.addEventListener("resize",this.handleResize,!1),v(document,this.options.startEvent,this.startEventListener),void this.element.addEventListener("change",this.changeEventListener,!1))}var E="eventListenerList",x="rangeSlider",S=0,w=t(),F={polyfill:!0,rangeClass:"rangeSlider",disabledClass:"rangeSlider--disabled",fillClass:"rangeSlider__fill",bufferClass:"rangeSlider__buffer",handleClass:"rangeSlider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"],min:null,max:null,step:null,value:null,buffer:null,borderRadius:10};return b.prototype.constructor=b,b.prototype._toFixed=function(t){return(t+"").replace(".","").length-1},b.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},b.prototype._updatePercentFromValue=function(){this.percent=(this.value-this.min)/(this.max-this.min)},b.prototype.startEventListener=function(t,e){var i=this,n=t.target,s=!1;p(n,function(t){return s=t.id===i.identifier&&!c(t,i.options.disabledClass)},!0),s&&this.handleDown(t,e)},b.prototype.changeEventListener=function(t,e){if(!e||e.origin!==this.identifier){var i=t.target.value,n=this.getPositionFromValue(i);this.setPosition(n)}},b.prototype.update=function(){this.handleWidth=o(this.handle,"offsetWidth"),this.rangeWidth=o(this.range,"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.element.disabled?l(this.range,this.options.disabledClass):u(this.range,this.options.disabledClass),this.setPosition(this.position),this.options.bufferClass&&this.options.buffer&&this.setBufferPosition(this.options.buffer,!0),this._updatePercentFromValue()},b.prototype.updateRange=function(t){(isFinite(t.min)||r(t.min))&&(this.element.setAttribute("min",""+t.min),this.min=t.min),(isFinite(t.max)||r(t.max))&&(this.element.setAttribute("max",""+t.max),this.max=t.max),(isFinite(t.step)||r(t.step))&&(this.element.setAttribute("step",""+t.step),this.step=t.step,this.toFixed=this._toFixed(t.step)),this.update()},b.prototype.handleResize=function(){var t=this;return i(function(){e(function(){t.update()},300)},20)()},b.prototype.handleDown=function(t){if(t.preventDefault(),v(document,this.options.moveEvent,this.handleMove),v(document,this.options.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(t),i=this.range.getBoundingClientRect().left,n=this.getPositionFromNode(this.handle)-i;this.setPosition(e-this.grabX),e>=n&&e<n+this.handleWidth&&(this.grabX=e-n),this._updatePercentFromValue()}},b.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t);this.setPosition(e-this.grabX)},b.prototype.handleEnd=function(t){t.preventDefault(),g(document,this.options.moveEvent,this.handleMove),g(document,this.options.endEvent,this.handleEnd),f(this.element,"change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.value,this.percent,this.position),this.onSlideEventsCount=0},b.prototype.cap=function(t,e,i){return e>t?e:t>i?i:t},b.prototype.setPosition=function(t){var e,i;e=this.getValueFromPosition(this.cap(t,0,this.maxHandleX)),i=this.getPositionFromValue(e),this.fill.style.width=i+this.grabX+"px",this.handle.style.left=i+"px",this.setValue(e),this.position=i,this.value=e,this._updatePercentFromValue(),this.onSlideStart&&"function"==typeof this.onSlideStart&&0===this.onSlideEventsCount&&this.onSlideStart(this.value,this.percent,this.position),this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(this.value,this.percent,this.position),this.onSlideEventsCount++},b.prototype.setBufferPosition=function(t,e){if(t=parseFloat(t),isNaN(t))return console.warn("New position is NaN"),this;if(!this.options.bufferClass)return console.warn("You disabled buffer, it's className is empty"),this;var i=e?t:t/this.rangeWidth*100;0>i&&(i=0),i>100&&(i=100),this.options.buffer=i;var n=this.options.borderRadius/this.rangeWidth*100,s=i-n;0>s&&(s=0),this.buffer.style.width=s+"%",this.buffer.style.left=.5*n+"%"},b.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},b.prototype.getRelativePosition=function(t){var e=this.range.getBoundingClientRect().left,i=0;return"undefined"!=typeof t.pageX?i=t.touches&&t.touches.length?t.touches[0].pageX:t.pageX:"undefined"!=typeof t.originalEvent.clientX?i=t.originalEvent.clientX:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0].clientX?i=t.originalEvent.touches[0].clientX:t.currentPoint&&"undefined"!=typeof t.currentPoint.x&&(i=t.currentPoint.x),i-e},b.prototype.getPositionFromValue=function(t){var e,i;return e=(t-this.min)/(this.max-this.min),i=e*this.maxHandleX},b.prototype.getValueFromPosition=function(t){var e,i;return e=t/(this.maxHandleX||1),i=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(i.toFixed(this.toFixed))},b.prototype.setValue=function(t){t!==this.value&&(this.element.value=t,f(this.element,"input",{origin:this.identifier}))},b.prototype.destroy=function(){y(document),window.removeEventListener("resize",this.handleResize,!1),this.element.removeEventListener("change",this.changeEventListener,!1),this.element.style.cssText="",delete this.element[x],this.range&&this.range.parentNode.removeChild(this.range)},b.create=function(t,e){function i(t){var i=t[x];i||(i=new b(t,e),t[x]=i)}t.length?Array.prototype.slice.call(t).forEach(function(t){i(t)}):i(t)},b});